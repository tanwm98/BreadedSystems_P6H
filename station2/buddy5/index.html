<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Pico Pirate Dashboard</title>
    <meta http-equiv="refresh" content="1">
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 20px; 
            background-color: #f0f0f0; 
        }
        .data-box { 
            background: white; 
            border: 1px solid #ccc; 
            padding: 15px; 
            margin: 15px 0; 
            border-radius: 8px; 
            box-shadow: 0 2px 4px rgba(0,0,0,0.1); 
        }
        button { 
            background-color: #4CAF50; 
            color: white; 
            border: none; 
            padding: 10px 20px; 
            margin: 5px; 
            border-radius: 4px; 
            cursor: pointer; 
        }
        button:hover { 
            background-color: #45a049; 
        }
        .active { 
            color: #4CAF50; 
            font-weight: bold; 
        }
        .inactive { 
            color: #f44336; 
            font-weight: bold; 
        }
        .error-message { 
            color: #f44336; 
            padding: 10px; 
            margin: 10px 0; 
            border: 1px solid #f44336; 
            border-radius: 4px; 
        }
        h1 { 
            color: #333; 
        }
        h2 { 
            color: #666; 
            margin-top: 0; 
        }
        .time-display { 
            font-size: 1.2em; 
            color: #333; 
            margin: 10px 0; 
        }
    </style>
</head>
<body>
    <h1>Pico Pirate Dashboard</h1>
    <div class="data-box">
        <h2>System Time</h2>
        <p class="time-display">Current Time: %s</p>
    </div>
    %s  <!-- Error message placeholder -->
    
    <div class="data-box">
        <h2>Controls</h2>
        <button onclick="location.href='/command?cmd=capture_pulses'">Start Capture</button>
        <button onclick="location.href='/command?cmd=replay_pulses'">Replay Pulses</button>
    </div>

    <div class="data-box">
        <h2>Status</h2>
        <p>Capture: <span class="%s">%s</span></p>
        <p>Replay: <span class="%s">%s</span></p>
        <p>Last Capture: %s</p>
        <p>Transitions: %d / %d</p>
    </div>

    <div class="data-box">
        <h2>Signal Analysis</h2>
        <p>PWM Status: <span class="%s">%s</span></p>
        <p>PWM Frequency: %.2f Hz</p>
        <p>PWM Duty Cycle: %.1f%%</p>
        <p>ADC Status: <span class="%s">%s</span></p>
        <p>Analog Frequency: %.2f Hz</p>
        <p>Protocol Status: <span class="%s">%s</span></p>
        <p>UART Baud Rate: %.0f bps</p>
    </div>

    <div class="data-box">
        <h2>Debug Information</h2>
        <p>IDCODE: 0x%08X</p>
    </div>
</body>
</html>